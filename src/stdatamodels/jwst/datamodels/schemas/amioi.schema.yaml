%YAML 1.1
---
$schema: "http://stsci.edu/schemas/fits-schema/fits-schema"
id: "http://stsci.edu/schemas/jwst_datamodel/amioi.schema"
title: AMI OIFITS analysis data model
allOf:
- $ref: oi_fits.schema
- type: object
  required: [oi_wavelength_meta, ]
  properties:
    oi_wavelength_table:
      $ref: oi_wavelength.schema
    oi_wavelength_meta:
      type: object
      properties:
        instrument_name:
          fits_hdu: OI_WAVELENGTH
          fits_keyword: INSNAME
        revn:
          fits_hdu: OI_WAVELENGTH
          fits_keyword: OI_REVN
      required: [instrument_name, revn]
    oi_array_table:
      $ref: oi_array.schema
    oi_array_meta:
      type: object
      properties:
        revn:
          fits_hdu: OI_ARRAY
          fits_keyword: OI_REVN
        arrname:
          fits_hdu: OI_ARRAY
          fits_keyword: ARRNAME
        frame:
          fits_hdu: OI_ARRAY
          fits_keyword: FRAME
        x:
          fits_hdu: OI_ARRAY
          fits_keyword: ARRAYX
        y:
          fits_hdu: OI_ARRAY
          fits_keyword: ARRAYY
        z:
          fits_hdu: OI_ARRAY
          fits_keyword: ARRAYZ
    oi_target_table:
      $ref: oi_target.schema
    oi_target_meta:
      type: object
      properties:
        revn:
          fits_hdu: OI_TARGET
          fits_keyword: OI_REVN
    oi_vis_table:
      $ref: oi_vis.schema
    oi_vis_meta:
      type: object
      properties:
        revn:
          fits_hdu: OI_VIS
          fits_keyword: OI_REVN
        date_obs:
          fits_hdu: OI_VIS
          fits_keyword: DATE-OBS
        array_name:
          fits_hdu: OI_VIS
          fits_keyword: ARRNAME
        instrument:
          fits_hdu: OI_VIS
          fits_keyword: INSNAME
    oi_vis2_table:
      $ref: oi_vis2.schema
    oi_vis2_meta:
      type: object
      properties:
        revn:
          fits_hdu: OI_VIS2
          fits_keyword: OI_REVN
        date_obs:
          fits_hdu: OI_VIS2
          fits_keyword: DATE-OBS
        array_name:
          fits_hdu: OI_VIS2
          fits_keyword: ARRNAME
        instrument:
          fits_hdu: OI_VIS2
          fits_keyword: INSNAME
    oi_t3_table:
      $ref: oi_t3.schema
    oi_t3_meta:
      type: object
      properties:
        revn:
          fits_hdu: OI_T3
          fits_keyword: OI_REVN
        date_obs:
          fits_hdu: OI_T3
          fits_keyword: DATE-OBS
        array_name:
          fits_hdu: OI_T3
          fits_keyword: ARRNAME
        instrument:
          fits_hdu: OI_T3
          fits_keyword: INSNAME
